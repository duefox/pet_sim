[gd_scene load_steps=4 format=3 uid="uid://bexvpmw5412um"]

[ext_resource type="Texture2D" uid="uid://drv7fa8n4dnys" path="res://assets/textures/foods.png" id="2_dkmuf"]

[sub_resource type="GDScript" id="GDScript_5bcq4"]
script/source = "# Food.gd
extends RigidBody2D
class_name Food2

@export var food_data: DroppableData
# 食物生命周期计时器，单位为秒
@export var lifetime: float = 20000.0

#宠物贴图
var food_sprite: Sprite2D


func _ready():
	food_sprite = find_child(\"Sprite2D\")
	food_sprite.texture = food_sprite.texture  #贴图和动画

	# 设置重力影响（Godot 默认重力为 980，这里使用一个更小的数值，看起来更像在水里）
	gravity_scale = 0.05

	# 确保刚体不会一开始就处于休眠状态
	sleeping = false


func _physics_process(delta: float) -> void:
	# 检查食物是否静止，如果是则开始计时
	if is_sleeping():
		lifetime -= delta
		if lifetime <= 0:
			queue_free()
"

[sub_resource type="CircleShape2D" id="CircleShape2D_o4lbg"]
radius = 7.0

[node name="Food" type="RigidBody2D"]
collision_layer = 2
collision_mask = 4
script = SubResource("GDScript_5bcq4")

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
shape = SubResource("CircleShape2D_o4lbg")

[node name="Sprite2D" type="Sprite2D" parent="."]
scale = Vector2(0.7, 0.7)
texture = ExtResource("2_dkmuf")
hframes = 4
vframes = 4
